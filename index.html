<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallows Tree Hangman</title>
    <style>
        :root { --trunk: #5d4037; --bark: #3e2723; --leaf: #2d5a27; --rope: #d4a373; --man: #dfe6e9; }
        
        body { 
            font-family: 'Georgia', serif; 
            background: #0f141e; 
            color: #eee; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            height: 100vh; 
            margin: 0; 
            padding: 0; 
            overflow: hidden; 
        }
        
        h2.main-title { 
            position: absolute; 
            top: 40px; 
            color:#c0092b; 
            z-index: 10; 
            margin: 0;
            text-shadow: 0 0 10px rgba(192, 9, 43, 0.4);
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .game-container { 
            background: #1a1f2b; 
            padding: 40px 30px; 
            border-radius: 15px; 
            box-shadow: 0 0 50px rgba(0,0,0,0.9); 
            text-align: center; 
            width: 500px; 
            border: 1px solid #333; 
            position: relative; 
            z-index: 10; 
        }

        /* STATIC ROPES */
        .rope-string { 
            position: absolute; 
            top: -3px; 
            width: 4px; 
            height: 90px; 
            background: var(--rope); 
            border-radius: 2px; 
            box-shadow: inset 1px 0 2px rgba(0,0,0,0.3);
            z-index: 5;
        }
        .rope-left { left: 15%; }
        .rope-right { right: 15%; }

        /* SWAYING SIGN WRAPPER */
        .sway-wrapper {
            position: relative;
            animation: sign-sway 3s ease-in-out infinite alternate;
            transform-origin: top center;
            z-index: 6;
        }

        @keyframes sign-sway { 
            from { transform: rotate(-1.5deg); } 
            to { transform: rotate(1.5deg); } 
        }

        .wooden-sign { 
            background: #4e342e; 
            border: 4px solid #2d1b18; 
            padding: 25px; 
            border-radius: 3px; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }

        /* FALLING LEAVES */
        .leaf {
            position: fixed;
            top: -20px;
            background: var(--leaf);
            border-radius: 2px 10px 2px 10px;
            z-index: 1;
            pointer-events: none;
            opacity: 0.6;
            animation: fall linear forwards;
        }

        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg) translateX(0); }
            100% { transform: translateY(110vh) rotate(360deg) translateX(30px); }
        }

        /* INPUT STYLES */
        #setup-screen input { 
            width: 85%; padding: 15px; border-radius: 3px; border: 2px dashed #3e2723; 
            background: #2d1b18; color: #f1c40f; text-align: center; font-size: 1.4rem; 
            letter-spacing: 5px; outline: none; box-shadow: inset 0 0 10px #000;
        }

        /* GAME SCREEN STYLES */
        #hangman-svg { margin: 10px 0; filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)); }
        .tree-trunk { fill: var(--trunk); stroke: var(--bark); stroke-width: 1.5; }
        .branch-sway { animation: sway 4s ease-in-out infinite alternate; transform-origin: 50px 100px; }
        @keyframes sway { from { transform: rotate(-1deg); } to { transform: rotate(1deg); } }
        
        .man-part { opacity: 0; transition: opacity 0.6s ease; stroke: var(--man); stroke-width: 3.5; fill: none; stroke-linecap: round; }
        .visible { opacity: 1; }
        .dead { animation: hang-swing 2.5s ease-in-out infinite alternate; transform-origin: 145px 65px; }
        @keyframes hang-swing { from { transform: rotate(-3deg); } to { transform: rotate(3deg); } }

        .btn { padding: 12px 24px; background: #c0392b; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 15px; transition: 0.3s; text-transform: uppercase; }
        .btn:hover { background: #e74c3c; transform: scale(1.05); }

        #word-display { font-size: 2.2rem; letter-spacing: 0.6rem; margin: 20px 0; color: #f1c40f; text-shadow: 2px 2px #000; }
        .keyboard { display: grid; grid-template-columns: repeat(9, 1fr); gap: 6px; }
        .key { background: #2c3e50; color: #fff; border: 1px solid #34495e; padding: 10px 0; border-radius: 4px; cursor: pointer; font-weight: bold; }
        .key:disabled { opacity: 0.2; cursor: not-allowed; }
        
        /* FOOTER CREDITS */
        footer {
            position: absolute;
            bottom: 20px;
            z-index: 10;
            background: rgba(45, 27, 24, 0.8);
            padding: 8px 25px;
            border: 1px solid #3e2723;
            border-radius: 20px;
            font-size: 0.85rem;
            color: #8d6e63;
            letter-spacing: 1px;
        }
        footer strong { color: #f1c40f; }

        .bg-tree { position: absolute; bottom: 0; opacity: 0.1; z-index: 1; pointer-events: none; }
    </style>
</head>
<body>

<h2 class="main-title">Hangman: The Gallows</h2>

<!-- Atmospheric Trees -->
<svg class="bg-tree" style="left: 5%;" width="100" height="200"><path d="M50 200 L50 50 M50 180 L20 150 M50 150 L80 120 M50 110 L30 80" stroke="white" stroke-width="2" fill="none"/></svg>
<svg class="bg-tree" style="right: 5%;" width="120" height="250"><path d="M60 250 L60 30 M60 210 L20 170 M60 170 L100 130 M60 120 L35 90" stroke="white" stroke-width="2" fill="none"/></svg>

<div class="game-container">
    <!-- Setup Screen -->
    <div id="setup-screen">
        <div class="rope-string rope-left"></div>
        <div class="rope-string rope-right"></div>
        <div class="sway-wrapper">
            <div class="wooden-sign">
                <h2 style="color:#f1c40f; margin-top: 0;">SET THE TRAP</h2>
                <p style="font-style: italic; color: #bbb; margin-bottom: 20px;">Player 1: Carve your secret word</p>
                <input type="password" id="secret-word" maxlength="15" autocomplete="off" placeholder="?????">
                <br>
                <button class="btn" onclick="startGame()">Lock Word</button>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" style="display:none">
        <svg id="hangman-svg" width="280" height="300" viewBox="0 0 280 300">
            <path d="M20 280 Q140 260 260 280" stroke="#2c1e1a" stroke-width="8" fill="none"/>
            <path class="tree-trunk" d="M50 280 Q40 180 60 100 Q70 40 50 20 L70 20 Q90 50 80 120 Q75 200 85 280 Z" />
            <g class="branch-sway">
                <path class="tree-trunk" d="M65 80 Q130 60 200 65 L200 75 Q130 70 65 95 Z" />
                <line x1="145" y1="68" x2="145" y2="95" stroke="var(--rope)" stroke-width="3" />
                <g id="body-group">
                    <circle id="p1" class="man-part" cx="145" cy="110" r="15" /> 
                    <line id="p2" class="man-part" x1="145" y1="125" x2="145" y2="180" /> 
                    <line id="p3" class="man-part" x1="145" y1="135" x2="115" y2="165" /> 
                    <line id="p4" class="man-part" x1="145" y1="135" x2="175" y2="165" /> 
                    <line id="p5" class="man-part" x1="145" y1="180" x2="125" y2="230" /> 
                    <line id="p6" class="man-part" x1="145" y1="180" x2="165" y2="230" /> 
                </g>
            </g>
        </svg>
        <div id="word-display"></div>
        <div id="msg" style="height: 30px; font-weight: bold; margin-bottom: 10px;"></div>
        <div class="keyboard" id="keyboard"></div>
        <button class="btn" style="background:#444" onclick="resetGame()">New Game</button>
    </div>
</div>

<footer id="game-footer">Credits: <strong>Missel Isaac DHS</strong></footer>

<script>
    let secretWord = "";
    let guessed = [];
    let mistakes = 0;

    // LEAF LOGIC
    function createLeaf() {
        const leaf = document.createElement('div');
        leaf.className = 'leaf';
        const size = Math.random() * 8 + 5;
        leaf.style.width = size + 'px';
        leaf.style.height = (size * 1.4) + 'px';
        leaf.style.left = Math.random() * 100 + 'vw';
        const duration = Math.random() * 5 + 5;
        leaf.style.animationDuration = duration + 's';
        const colors = ['#2d5a27', '#4a7c44', '#1e3d1a', '#6d4c41'];
        leaf.style.background = colors[Math.floor(Math.random() * colors.length)];
        document.body.appendChild(leaf);
        setTimeout(() => { leaf.remove(); }, duration * 1000);
    }
    setInterval(createLeaf, 400);

    // GAME LOGIC
    function startGame() {
        const val = document.getElementById("secret-word").value.toUpperCase().trim();
        if (!val || !/^[A-Z]+$/.test(val)) return alert("Please enter a valid word (A-Z)!");
        
        secretWord = val;
        
        // Hide setup and footer, show game
        document.getElementById("setup-screen").style.display = "none";
        document.getElementById("game-footer").style.display = "none";
        document.getElementById("game-screen").style.display = "block";
        
        updateDisplay();
        renderKeys();
    }

    function renderKeys() {
        const kb = document.getElementById("keyboard");
        kb.innerHTML = "";
        "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(l => {
            const b = document.createElement("button");
            b.innerText = l;
            b.className = "key";
            b.onclick = () => {
                b.disabled = true;
                if (secretWord.includes(l)) {
                    guessed.push(l);
                    updateDisplay();
                    if (!document.getElementById("word-display").innerText.includes("_")) end(true);
                } else {
                    mistakes++;
                    if(mistakes <= 6) document.getElementById(`p${mistakes}`).classList.add("visible");
                    if (mistakes >= 6) end(false);
                }
            };
            kb.appendChild(b);
        });
    }

    function updateDisplay() {
        document.getElementById("word-display").innerText = secretWord.split("")
            .map(l => guessed.includes(l) ? l : "_").join("");
    }

    function end(win) {
        const m = document.getElementById("msg");
        m.innerText = win ? "PLAYER 2 SURVIVED!" : `EXECUTED! Word: ${secretWord}`;
        m.style.color = win ? "#2ecc71" : "#c0392b";
        document.querySelectorAll(".key").forEach(k => k.disabled = true);
        if (!win) document.getElementById("body-group").classList.add("dead");
    }

    function resetGame() {
        location.reload();
    }
</script>
</body>
</html>
